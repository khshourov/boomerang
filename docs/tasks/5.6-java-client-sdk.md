# Task 5.6: Java Client SDK (`boomerang-client-java`)

This task involves creating a standalone Java library that provides a clean, synchronous API for interacting with the Boomerang server and receiving callbacks.

## Objectives
- [ ] Scaffold the `boomerang-client-java` module in the Gradle project.
- [ ] Implement a synchronous `BoomerangClient` for task registration and management.
- [ ] Implement a modular `CallbackReceiver` supporting TCP, UDP, gRPC, and HTTP (using built-in JDK features where possible).
- [ ] Implement session management with automatic login/reconnection logic.
- [ ] Ensure the SDK is lightweight with minimal external dependencies.

## Implementation Plan

### 1. Scaffolding
- [x] Create `boomerang-client-java` directory.
- [x] Add `build.gradle.kts` with dependencies on `boomerang-proto` and Protobuf.
- [x] Register the module in `settings.gradle.kts`.

### 2. Client API (`BoomerangClient`)
- [x] Implement a synchronous client using standard Java `java.net.Socket`.
- [x] Implement the message framing (4-byte length prefix) to match the server's Netty configuration.
- [x] Implement `register(Task)`, `cancel(TaskId)`, `listTasks()`, and `getTask(TaskId)`.
- [x] Implement `login(clientId, password)` and automatic session attachment to requests.

### 3. Callback Receiver (`CallbackReceiver`)
- [x] Design a `CallbackHandler` interface for users to process incoming tasks.
- [x] Implement `TcpCallbackReceiver` using `java.net.ServerSocket`.
- [x] Implement `UdpCallbackReceiver` using `java.net.DatagramSocket`.
- [x] Implement `HttpCallbackReceiver` using `com.sun.net.httpserver.HttpServer`.
- [x] Implement `GrpcCallbackReceiver` (Modular approach to minimize core dependencies).
- [x] Provide a `CallbackReceiverBuilder` to easily configure and start the desired receivers.

### 4. Reliability & Session Management
- [x] Implement automatic re-login if the session expires or the connection is lost.
- [x] Add basic retry logic for client-initiated requests.

### 5. Verification
- [x] Write unit tests for the client and each receiver type (using mocks/fakes where necessary).
- [x] Integration test: Verify the client can register a task and receive a callback from a local `BoomerangServer`.

## Success Criteria
- [ ] `boomerang-client-java` module is correctly integrated into the build.
- [ ] A user can register a task with a single method call.
- [ ] A user can start a callback receiver with a few lines of code.
- [ ] The library has minimal dependencies (Protobuf and SLF4J are acceptable).
- [ ] Mutation testing score (PITest) is >80%.
