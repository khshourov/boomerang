# Task 6.1: Implement Web Backend (Spring Boot 4)

## Goal
Scaffold and implement the `boomerang-web-backend` module using Spring Boot 4, integrating with `boomerang-client-java` to provide REST API wrappers for Boomerang operations.

## Requirements
- **Spring Boot Version:** Use Spring Boot 4 (and Spring Framework 7).
- **Module Name:** `boomerang-web-backend`.
- **Core Integration:** Use `boomerang-client-java` for communication with the Boomerang server.
- **Authentication:**
    - Implement `/api/login` endpoint that takes `clientId` and `password`.
    - It should use `DefaultBoomerangClient.login(clientId, password)` to get a `sessionId`.
    - Return this `sessionId` to the web client (to be stored in the browser/client).
    - For subsequent `/api/tasks` requests, if `sessionId` is present in the headers, use `DefaultBoomerangClient(host, port, sessionId)` constructor.
    - If a request fails due to session issues, handle re-login.
- **Task Management API:**
    - Implement REST wrappers for:
        - `POST /api/tasks/register`
        - `POST /api/tasks/cancel`
        - `GET /api/tasks/{id}`
        - `GET /api/tasks` (list with filters)
- **Security:** Configure Spring Security (CORS, CSRF, Secure Auth).
- **Integration Testing:**
    - Use Testcontainers to run the Boomerang server in a Dockerized environment.
    - Test all REST endpoints against the live Dockerized server.
- **Exclusions:**
    - Skip real-time monitoring (WebSockets/SSE) for now.
    - Skip mutation testing for this module.

## Proposed Sub-tasks
1. [x] **Scaffold Module:** Create `boomerang-web-backend` module, update `settings.gradle.kts` and `build.gradle.kts`.
2. [x] **Spring Boot Infrastructure:** Configure `BoomerangClient` bean and properties (server host/port).
3. [x] **Authentication API:** Implement `AuthController` and session management logic.
4. [x] **Task API:** Implement `TaskController` with CRUD operations using `BoomerangClient`.
5. [x] **Security Configuration:** Set up Spring Security for the API.
6. [x] **Integration Tests:** Implement `BoomerangWebIntegrationTest` using Testcontainers and Docker.

## Clarification Questions
- Which Spring Boot 4 version specifically? (Search indicates 4.0.0 is released in this timeline).
- Should we use a specific header name for the `sessionId`? (e.g., `X-Boomerang-Session`).
- For re-login, does the backend need to store user credentials, or should it just return a 401 and let the frontend re-trigger `/api/login`?
