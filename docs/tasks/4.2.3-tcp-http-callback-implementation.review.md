# Review: Task 4.2.3 - Implement TCP and HTTP Callback Protocols

## Status
- **Approved:** Yes (Minor observation)
- **Review Date:** 2026-02-21
- **Reviewer:** Gemini CLI

## Findings
- **Correctness:** `HttpCallbackHandler` correctly uses `java.net.http.HttpClient`. `TcpCallbackHandler` effectively uses Netty to send Protobuf-encoded `BoomerangEnvelope`s.
- **Standards:** Netty pipelines are properly configured with framing (`LengthFieldBasedFrameDecoder`/`LengthFieldPrepender`).
- **Completeness:** Both protocols are implemented as described. Custom HTTP headers for task and client ID enhance traceability.

## Recommendations
- **Typos:** In `HttpCallbackHandler.java`, the catch block for `InterruptedException` contains the message `"TCP callback connection interrupted"`. This should be updated to `"HTTP callback connection interrupted"` to avoid confusion during debugging.
- **Connection Management:** `TcpCallbackHandler` currently opens and closes a connection for *every* task. While this ensures isolation, it might be a bottleneck at high frequency. Future iterations should implement connection pooling for TCP and gRPC protocols, as noted in Task 4.2.4.
